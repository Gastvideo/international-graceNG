<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>International-Grace</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0; padding: 0;
    background: url('https://images.unsplash.com/photo-1501004318641-b39e6451bec6?auto=format&fit=crop&w=1050&q=80') no-repeat center center fixed;
    background-size: cover;
    color: #333;
  }
  .overlay {
    background: rgba(255,255,255,0.95);
    min-height: 100vh;
    padding: 20px;
  }
  h1 { text-align: center; color: #2c3e50; }
  form { max-width: 400px; margin: 20px auto; background: #fff; padding: 20px; border-radius: 10px; }
  input, select { width: 100%; padding: 8px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc; }
  button { padding: 10px 15px; border: none; border-radius: 8px; background: #3498db; color: #fff; cursor: pointer; margin-top: 5px; }
  #dashboard { display: none; max-width: 800px; margin: 20px auto; }
  .salle { background: #fff; padding: 15px; margin: 10px 0; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
  .hidden { display: none; }
  .payment-box, .chat-box { background: #ecf0f1; padding: 10px; border-radius: 8px; margin: 10px 0; }
  .messages { max-height: 150px; overflow-y: auto; margin-bottom: 5px; }
  .message { border-bottom: 1px solid #ccc; padding: 5px 0; }
</style>
</head>
<body>
<div class="overlay">
  <h1>Bienvenue sur la page International-Grace</h1>

  <!-- Formulaire inscription / connexion -->
  <form id="signup-form">
    <h2>S'inscrire / Se connecter</h2>
    <input type="text" id="nom" placeholder="Nom">
    <input type="text" id="prenom" placeholder="Prénom">
    <select id="sex">
      <option value="">Sexe</option>
      <option value="Homme">Homme</option>
      <option value="Femme">Femme</option>
    </select>
    <input type="number" id="age" placeholder="Âge">
    <input type="text" id="profession" placeholder="Profession">
    <input type="tel" id="telephone" placeholder="Téléphone" required>
    <input type="password" id="password" placeholder="Mot de passe" required>
    <button type="submit">Enregistrer / Connexion</button>
  </form>

  <!-- Dashboard -->
  <div id="dashboard">
    <h2>Tableau de bord</h2>

    <div class="salle" id="vente">
      <h3>Salle Vente</h3>
      <p>Achetez et vendez des produits entre membres.</p>
      <button onclick="confirmAccess('vente')">Rejoindre la salle</button>
      <div class="hidden" id="code-box-vente">
        <p>Code de confirmation : <span id="code-vente"></span></p>
        <input type="text" id="code-input-vente" placeholder="Entrez le code">
        <button onclick="verifyCode('vente')">Valider</button>
      </div>
      <div class="hidden" id="payment-vente">
        <button onclick="showPaymentNumbers('vente','MTN MoMo')">MTN MoMo</button>
        <button onclick="showPaymentNumbers('vente','Moov Money')">Moov Money</button>
      </div>
      <div class="payment-box hidden" id="payment-box-vente">
        <p id="number-vente"></p>
        <button onclick="copyNumber('number-vente')">Copy</button>
        <button onclick="sendPayment('vente')">Envoyer & Confirmer</button>
      </div>
      <div class="chat-box hidden" id="chat-vente">
        <div class="messages" id="messages-vente"></div>
        <input type="text" id="input-msg-vente" placeholder="Écrire un message">
        <input type="file" id="file-vente" accept="image/*,video/*">
        <button onclick="sendMessage('vente')">Envoyer</button>
      </div>
    </div>

    <!-- Répéter les autres salles (entraide, formation, emploi) de manière similaire -->
    <div class="salle" id="entraide">
      <h3>Salle Rencontre & Entraide</h3>
      <p>Discutez et entraidez-vous.</p>
      <button onclick="confirmAccess('entraide')">Rejoindre la salle</button>
      <div class="hidden" id="code-box-entraide">
        <p>Code de confirmation : <span id="code-entraide"></span></p>
        <input type="text" id="code-input-entraide" placeholder="Entrez le code">
        <button onclick="verifyCode('entraide')">Valider</button>
      </div>
      <div class="hidden" id="payment-entraide">
        <button onclick="showPaymentNumbers('entraide','MTN MoMo')">MTN MoMo</button>
        <button onclick="showPaymentNumbers('entraide','Moov Money')">Moov Money</button>
      </div>
      <div class="payment-box hidden" id="payment-box-entraide">
        <p id="number-entraide"></p>
        <button onclick="copyNumber('number-entraide')">Copy</button>
        <button onclick="sendPayment('entraide')">Envoyer & Confirmer</button>
      </div>
      <div class="chat-box hidden" id="chat-entraide">
        <div class="messages" id="messages-entraide"></div>
        <input type="text" id="input-msg-entraide" placeholder="Écrire un message">
        <input type="file" id="file-entraide" accept="image/*,video/*">
        <button onclick="sendMessage('entraide')">Envoyer</button>
      </div>
    </div>
  </div>
</div>

<script>
// LocalStorage simulation des utilisateurs
let users = JSON.parse(localStorage.getItem('users') || '[]');

document.getElementById('signup-form').addEventListener('submit', function(e){
  e.preventDefault();
  const tel = document.getElementById('telephone').value;
  const pwd = document.getElementById('password').value;

  let existing = users.find(u => u.telephone === tel);
  if(existing){
    if(existing.password === pwd){
      alert('Connexion réussie !');
    } else {
      alert('Mot de passe incorrect !'); return;
    }
  } else {
    users.push({
      nom: document.getElementById('nom').value,
      prenom: document.getElementById('prenom').value,
      sex: document.getElementById('sex').value,
      age: document.getElementById('age').value,
      profession: document.getElementById('profession').value,
      telephone: tel,
      password: pwd
    });
    localStorage.setItem('users', JSON.stringify(users));
    alert('Inscription réussie !');
  }
  this.style.display = 'none';
  document.getElementById('dashboard').style.display = 'block';
});

// Code de confirmation
function confirmAccess(salle){
  let code = Math.floor(100000 + Math.random() * 900000);
  document.getElementById('code-'+salle).textContent = code;
  document.getElementById('code-box-'+salle).classList.remove('hidden');
  document.getElementById('code-box-'+salle).dataset.code = code;
}

function verifyCode(salle){
  let input = document.getElementById('code-input-'+salle).value;
  let code = document.getElementById('code-box-'+salle).dataset.code;
  if(input == code){
    alert('Code validé ! Vous pouvez payer pour accéder à la salle.');
    document.getElementById('payment-'+salle).classList.remove('hidden');
    document.getElementById('code-box-'+salle).classList.add('hidden');
  } else {
    alert('Code incorrect !');
  }
}

// Paiement simulé
const momoNumbers = {'MTN MoMo': '+229 0154992775','Moov Money': '+229 0168036302'};
function showPaymentNumbers(salle, provider){
  const numberEl = document.getElementById('number-'+salle);
  numberEl.textContent = `Numéro ${provider} : ${momoNumbers[provider]}
